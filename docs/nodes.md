# Nodes

There are several nodes than can be used to communicate with your devices:
* [Devices](#devices-node)
* [Device (generic)](#device-node)
* [Firmware](#firmware-node)
* [Power state (in)](#power-state-in-node)
* [Power state (out)](#power-state-out-node)
* [Channels](#channels-node)
* [Event listener](#event-listener-node)
* [Power usage](#power-usage-node-node)
* [Humidity](#humidity-node)
* [Temperature](#temperature-node)
* [Temperature and humidity](#temp-hum-node)

#### [Devices node](#devices-node)

![](images/nodes/devices.png)

Using this node you can retrieve all the devices attached to your account.

Result example:
```json
[
    {
        "_id": "5df2cbda08eb57bea4d6c70f",
        "name": "Kitchen Lamp"
        "type": "10",
        "deviceid: "12345678",
        ...
    },
    ...
]
```

#### [Device node (generic)](#device-node)

![](images/nodes/device.png)

You can communicate with your devices using RPC-like syntax.

A list of all methods you can find here: https://ewelink-api.now.sh/docs/available-methods 

The input payload should look like:
```json
{
    "method": "<method name>",
    "params": [<params>],
}
```

Simple example to turn on a **Sonoff Basic** relay:
```json
{
    "method": "setDevicePowerState",
    "params": ["on"]
}
```

#### [Firmware node](#firmware-node)

![](images/nodes/firmware.png)

Returns the current firmware version of a device.

Result example:
```json
{
    "status": "ok",
    "fwVersion": "1.6.0"
}
```

#### [Power state node in](#powerstatein-node)

![](images/nodes/power-state-in.png)

Reads the current power state of a single channel device.

Result example:
```json
{
    "status": "ok",
    "state": "on"
}
```

#### [Power state node (out)](#power-state-out-node)

![](images/nodes/power-state-out.png)

Sets the power state of a single channel device. The payload can be any of the following strings:
* on
* off
* toggle

Result example:
```json
{
    "status": "ok",
    "state": "on"
}
```

#### [Channels node](#channels-node)

![](images/nodes/channels.png)

Returns the number of the channels for the device.

Result example:
```json
{
    "status": "ok",
    "switchesAmount": 1
}
```

#### [Event listener node](#event-listener-node)

![](images/nodes/event-listener.png)

Listens to events of a devices. When a change occures it will return the event.
By default it listens for events generated by all the devices, but you can specify a single device ID to listen on.

Result example:
```json
{
    "action": "update",
    "deviceid": "12345678",
    "params": {
        switch: "on"
    }
}
```

#### [Power usage node](#power-usage-node)

![](images/nodes/power-usage.png)

Returns the current month power usage on the device.

#### [Humidity node](#humidity-node)

![](images/nodes/humidity.png)

Returns the humidity value from the sensor connected to the device.

Result example:
```json
{
    "status": "ok",
    "humidity": "40.15"
}
```

#### [Temperature node](#temperature-node)

![](images/nodes/temperature.png)

Returns the temperature value from the sensor connected to the device.

Result example:
```json
{
    "status": "ok",
    "temperature": "21.79"
}
```

#### [Temperature and humidity node](#temp-hum-node)

![](images/nodes/temp-hum.png)

Returns the temperature and humidity value from the sensor connected to the device.

Result example:
```json
{
    "status": "ok",
    "temperature": "21.79",
    "humidity": "40.15"
}
```

[‚Üê Go back to the configuration](configuration.md)
